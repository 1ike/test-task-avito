{"version":3,"sources":["pages/Story/NavbarComponent/NavbarComponent.module.scss","components/RefreshButton/RefreshButton.module.scss","features/shared.ts","app/config.ts","app/lib.ts","features/story.ts","app/API.ts","features/comment.ts","features/numberOfDisplayedStories.ts","app/store.ts","serviceWorker.ts","app/hooks.ts","components/Layout.tsx","components/DelimiterVertical.tsx","components/RefreshButton/index.tsx","pages/Home/NavbarComponent.tsx","pages/Home/index.tsx","pages/Story/Comment.tsx","pages/Story/NavbarComponent/index.tsx","pages/Story/index.tsx","index.tsx","pages/Story/Story.module.scss","pages/Home/Home.module.scss"],"names":["module","exports","RequestStatus","process","REACT_APP_HACKER_NEWS_API_URL","REACT_APP_POLLING_INTERVAL","REACT_APP_STORIES_QTY","REACT_APP_STORIES_QTY_PER_PAGE","REACT_APP_DEPLOY_URL_PREFIX","HACKER_NEWS_API_URL","POLLING_INTERVAL","Number","STORIES_QTY","STORIES_QTY_PER_PAGE","PREFIX","transformDate","time","formatDate","Date","toLocaleString","year","month","day","storyApi","createApi","reducerPath","baseQuery","fetchBaseQuery","baseUrl","endpoints","builder","getNewStories","query","queryFn","_arg","_queryApi","_extraOptions","fetchWithBQ","idsResult","error","ids","data","storyPromises","slice","map","id","Promise","all","results","find","result","filter","Boolean","story","useGetNewStoriesQuery","promises","fetch","method","then","response","ok","json","Error","status","fetchComments","createAsyncThunk","commentIds","a","fetchAllComments","commentsAcc","length","comments","API","console","filteredComments","comment","deleted","childrenIds","reduce","acc","kids","commentsAdapter","createEntityAdapter","initialState","getInitialState","loading","Idle","reducer","createSlice","name","reducers","extraReducers","addCase","pending","state","Pending","fulfilled","action","upsertMany","payload","getSelectors","selectCommentEntities","selectById","selectIds","selectEntities","selectAllComments","selectAll","selectStoryCommentsQty","selectTotal","createSelector","_","rootCommentIds","commentEntities","entities","filterDeleted","filteredCommentsFilteredIds","qty","getCommentsQty","idsAcc","selectIsCommentsLoading","numberOfDisplayedStoriesName","increaseNumberOfDisplayedStories","actions","selectNumberOfDisplayedStories","store","configureStore","commentsReducer","numberOfDisplayedStoriesReducer","middleware","getDefaultMiddleware","concat","window","location","hostname","match","useAppDispatch","useDispatch","useAppSelector","useSelector","useTitle","titleOrFn","deps","useEffect","document","title","Layout","children","NavbarComponent","navbarComponent","Navbar","bg","expand","Container","Brand","to","className","DelimiterVertical","iconStyle","width","height","RefreshButton","props","tooltipText","tooltipPlacement","onClick","disabled","OverlayTrigger","placement","overlay","tooltipProps","Tooltip","Button","style","classNames","styles","rotating","isFetching","Index","displayedQty","undefined","pollingInterval","stories","refetch","isLoading","displayedStories","React","useMemo","dispatch","showMore","useCallback","content","Spinner","animation","variant","Card","Body","Title","Subtitle","score","by","renderComments","c","Comment","rootCommentsState","expandComment","isRootCommentHasChildren","some","parent","comment__header","size","Text","dangerouslySetInnerHTML","__html","sanitizeHtml","text","button","icon","ContentWrapper","Story","idFromParams","useParams","cachedStory","selectFromResult","item","useState","setStory","storyError","setStoryError","expandRootCommentInitialState","commentId","setRootCommentsState","onExpandRootCommentClick","memoize","prevState","refreshComments","timer","refresh","setTimeout","clearTimeout","s","catch","message","rootComments","commentsQty","isCommentsLoading","url","href","isEmpty","Alert","ReactDOM","render","StrictMode","basename","path","component","Home","exact","NewsItem","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c1c62175.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"NavbarComponent_button__1NXhp\",\"icon\":\"NavbarComponent_icon__2QjTR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rotating\":\"RefreshButton_rotating__28Fr1\"};","export enum RequestStatus {\n  Idle = 'idle',\n  Pending = 'pending',\n  Fulfilled = 'fulfilled',\n  Rejected = 'rejected',\n}\n","const {\n  REACT_APP_HACKER_NEWS_API_URL,\n  REACT_APP_POLLING_INTERVAL,\n  REACT_APP_STORIES_QTY,\n  REACT_APP_STORIES_QTY_PER_PAGE,\n  REACT_APP_DEPLOY_URL_PREFIX,\n} = process.env;\n\n\nexport const HACKER_NEWS_API_URL = REACT_APP_HACKER_NEWS_API_URL || 'https://hacker-news.firebaseio.com/v0/';\n\nexport const POLLING_INTERVAL = Number(REACT_APP_POLLING_INTERVAL) || 60000;\n\nexport const STORIES_QTY = Number(REACT_APP_STORIES_QTY) || 100;\nexport const STORIES_QTY_PER_PAGE = Number(REACT_APP_STORIES_QTY_PER_PAGE) || 10;\n\nexport const PREFIX = REACT_APP_DEPLOY_URL_PREFIX || '';\n","export const transformDate = (time: number) => time * 1000;\n\nexport const formatDate = (time: number) => (new Date(time)).toLocaleString('en', {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n});\n","import {\n  createApi,\n  fetchBaseQuery,\n  FetchBaseQueryError, FetchBaseQueryMeta,\n} from '@reduxjs/toolkit/query/react';\n\nimport { QueryReturnValue } from '@reduxjs/toolkit/dist/query/baseQueryTypes';\nimport { HACKER_NEWS_API_URL, STORIES_QTY } from '../app/config';\nimport { BaseEntityInterface } from '../app/types';\nimport { transformDate } from '../app/lib';\n\n\nexport interface StoryInterface extends BaseEntityInterface {\n  title: string;\n  score: number;\n  url?: string;\n  text?: string;\n}\n\nexport const storyApi = createApi({\n  reducerPath: 'storyApi',\n  baseQuery: fetchBaseQuery({ baseUrl: HACKER_NEWS_API_URL }),\n  endpoints: (builder) => ({\n    getNewStories: builder.query<StoryInterface[], void>({\n      async queryFn(_arg, _queryApi, _extraOptions, fetchWithBQ) {\n        const idsResult = await fetchWithBQ('newstories.json');\n        if (idsResult.error) return { error: idsResult.error as FetchBaseQueryError };\n\n        const ids = idsResult.data as string[];\n\n        const storyPromises = ids.slice(0, STORIES_QTY).map((id) => fetchWithBQ(`item/${id}.json`));\n\n        const results = (await Promise.all(storyPromises)) as QueryReturnValue<\n          StoryInterface,\n          FetchBaseQueryError,\n          FetchBaseQueryMeta\n          >[];\n        const error = results.find((result) => result.error);\n\n        return error\n          ? { error: error as FetchBaseQueryError }\n          : {\n            data: results\n              .filter(({ data }) => Boolean(data))\n              .map(({ data: story }) => (\n                { ...story, time: transformDate(story?.time || 0) })) as StoryInterface[],\n          };\n      },\n    }),\n  }),\n});\n\n\nexport const { useGetNewStoriesQuery } = storyApi;\n","import { HACKER_NEWS_API_URL } from './config';\nimport { IDs } from './types';\nimport { transformDate } from './lib';\nimport type { StoryInterface } from '../features/story';\nimport type { CommentInterface } from '../features/comment';\n\n\nconst fetchByIds = (ids: IDs): Promise<(StoryInterface | CommentInterface)[]> => {\n  const promises = ids.map((id) => fetch(\n    `${HACKER_NEWS_API_URL}item/${id}.json`,\n    { method: 'GET' },\n  )\n    .then((response) => {\n      if (response.ok) return response.json();\n\n      throw new Error(`Error with status code ${response.status}`);\n    })\n    .then((data) => ({ ...data, time: transformDate(data.time) })));\n\n  return Promise.all(promises);\n};\n\nexport default {\n  fetchByIds,\n};\n","import { createAsyncThunk, createEntityAdapter, createSlice } from '@reduxjs/toolkit';\nimport { createSelector } from 'reselect';\n\nimport API from '../app/API';\nimport type { RootState } from '../app/store';\nimport { BaseEntityInterface, ID, IDs } from '../app/types';\nimport { RequestStatus } from './shared';\n\n\nexport interface CommentInterface extends BaseEntityInterface {\n  text: string;\n  parent?: ID;\n}\n\nexport const fetchComments = createAsyncThunk('comments/fetchAll', async (commentIds: IDs) => {\n  const fetchAllComments = async (\n    commentsAcc: CommentInterface[], ids:IDs,\n  ): Promise<CommentInterface[]> => {\n    if (ids.length === 0) return commentsAcc;\n\n    let comments: CommentInterface[] = [];\n    try {\n      comments = (await API.fetchByIds(ids)) as CommentInterface[];\n    } catch (error) {\n      console.error('Log somewhere error', error);\n    }\n    const filteredComments = comments.filter((comment) => comment && !comment.deleted);\n    const childrenIds: IDs = filteredComments.reduce(\n      (acc, comment) => {\n        const { kids = [] } = comment;\n        return kids.length > 0 ? [...acc, ...kids] : acc;\n      },\n      [] as IDs,\n    );\n\n    return fetchAllComments([...commentsAcc, ...filteredComments], childrenIds);\n  };\n\n  return fetchAllComments([], commentIds);\n});\n\nconst commentsAdapter = createEntityAdapter<CommentInterface>();\nconst initialState = commentsAdapter.getInitialState({\n  loading: RequestStatus.Idle,\n});\n\nexport const slice = createSlice({\n  name: 'comments',\n  initialState,\n  /* eslint-disable no-param-reassign */\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetchComments.pending, (state) => {\n      if (state.loading === RequestStatus.Idle) {\n        state.loading = RequestStatus.Pending;\n      }\n    });\n    builder.addCase(fetchComments.fulfilled, (state, action) => {\n      if (state.loading === RequestStatus.Pending) {\n        commentsAdapter.upsertMany(state, action.payload);\n        state.loading = RequestStatus.Idle;\n      }\n    });\n  },\n  /* eslint-enable no-param-reassign */\n});\n\nconst { reducer } = slice;\nexport default reducer;\n\nexport const {\n  selectById: selectCommentById,\n  selectIds: selectCommentIds,\n  selectEntities: selectCommentEntities,\n  selectAll: selectAllComments,\n  selectTotal: selectTotalComments,\n} = commentsAdapter.getSelectors((state: RootState) => state.comments);\n\n\nexport const selectStoryComments = createSelector(\n  selectCommentEntities,\n  (_: RootState, rootCommentIds: IDs) => rootCommentIds,\n  (commentEntities, ids) => {\n    const entities = ids.reduce(\n      (acc, id) => (commentEntities[id] ? { ...acc, [id]: commentEntities[id] } : acc),\n      {},\n    );\n\n    return { ids, entities };\n  },\n);\nexport const selectStoryCommentsQty = createSelector(\n  selectCommentEntities,\n  (_: RootState, rootCommentIds: IDs) => rootCommentIds,\n  (commentEntities, rootCommentIds) => {\n    const filterDeleted = (id: ID) => commentEntities[id] && !commentEntities[id]?.deleted;\n\n    const filteredCommentsFilteredIds = rootCommentIds.filter(filterDeleted);\n\n    const getCommentsQty = (acc: ID, ids: IDs): number => {\n      if (ids.length === 0) return acc;\n\n      const childrenIds = ids.reduce(\n        (idsAcc: IDs, id: ID) => {\n          const kids = commentEntities[id]?.kids?.filter(filterDeleted) || [];\n          return kids.length > 0 ? [...idsAcc, ...kids] : idsAcc;\n        },\n        [],\n      );\n\n      return childrenIds.length + getCommentsQty(acc, childrenIds);\n    };\n\n    const qty = getCommentsQty(filteredCommentsFilteredIds.length, filteredCommentsFilteredIds);\n\n    return qty;\n  },\n);\n\nexport const selectIsCommentsLoading = (state: RootState) => (\n  state.comments.loading === RequestStatus.Pending\n);\n","import { createSlice } from '@reduxjs/toolkit';\n\nimport type { RootState } from '../app/store';\nimport { STORIES_QTY_PER_PAGE } from '../app/config';\n\n\nexport const numberOfDisplayedStoriesName = 'numberOfDisplayedStories';\nexport const slice = createSlice({\n  name: numberOfDisplayedStoriesName,\n  initialState: {\n    qty: STORIES_QTY_PER_PAGE,\n  },\n  /* eslint-disable no-param-reassign */\n  reducers: {\n    increaseNumberOfDisplayedStories: (state) => {\n      state.qty += STORIES_QTY_PER_PAGE;\n    },\n  },\n  /* eslint-enable no-param-reassign */\n});\n\nexport const { increaseNumberOfDisplayedStories } = slice.actions;\n\nconst { reducer } = slice;\nexport default reducer;\n\nexport const selectNumberOfDisplayedStories = (\n  state: RootState,\n) => state[numberOfDisplayedStoriesName].qty;\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit';\n// eslint-disable-next-line import/no-cycle\n// import counterReducer from '../features/counter/counterSlice';\nimport { storyApi } from '../features/story';\n// eslint-disable-next-line import/no-cycle\nimport commentsReducer from '../features/comment';\nimport numberOfDisplayedStoriesReducer, { numberOfDisplayedStoriesName } from '../features/numberOfDisplayedStories';\n\nexport const store = configureStore({\n  reducer: {\n    [storyApi.reducerPath]: storyApi.reducer,\n    comments: commentsReducer,\n    [numberOfDisplayedStoriesName]: numberOfDisplayedStoriesReducer,\n  },\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(storyApi.middleware),\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport { useEffect } from 'react';\n\nimport type { RootState, AppDispatch } from './store';\n\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n\n\ntype TitleOrFnType = string | (() => string);\nexport const useTitle = (titleOrFn: TitleOrFnType, deps: any[] = []) => {\n  useEffect(\n    () => {\n      document.title = typeof titleOrFn === 'function' ? titleOrFn() : titleOrFn;\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    deps,\n  );\n};\n","import React from 'react';\nimport { Navbar, Container } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\n\n\ninterface PropsInterface {\n  children: React.ReactNode,\n  // eslint-disable-next-line react/require-default-props\n  navbarComponent?: React.FunctionComponent\n}\n\nconst Layout = ({ children, navbarComponent: NavbarComponent }: PropsInterface) => (\n  <>\n    <Navbar bg=\"light\" expand=\"lg\">\n      <Container>\n        <Navbar.Brand>\n          <Link\n            to=\"/\"\n            className=\"fs-2 ms-3 text-muted text-decoration-none\"\n          >\n            Avito test task\n          </Link>\n        </Navbar.Brand>\n        {NavbarComponent && <NavbarComponent />}\n      </Container>\n    </Navbar>\n    {children}\n  </>\n);\n\nexport default Layout;\n","import React from 'react';\n\n\nconst DelimiterVertical = () => <span className=\"ms-2 me-2\">|</span>;\n\nexport default DelimiterVertical;\n","import React from 'react';\nimport {\n  Button, OverlayTrigger, Tooltip, TooltipProps,\n} from 'react-bootstrap';\nimport { BsArrowRepeat } from 'react-icons/bs';\nimport { Placement } from 'react-bootstrap/types';\nimport classNames from 'classnames';\n\nimport styles from './RefreshButton.module.scss';\n\n\nconst iconSize = 25;\nconst iconStyle = {\n  width: iconSize,\n  height: iconSize,\n};\n\n/* eslint-disable react/require-default-props */\ninterface PropsInterface {\n  tooltipText?: string;\n  tooltipPlacement?: Placement;\n  onClick?: () => void;\n  disabled?: boolean;\n}\n/* eslint-enable react/require-default-props */\n\nconst RefreshButton = (props: PropsInterface) => {\n  const {\n    tooltipText = 'Refresh',\n    tooltipPlacement = 'top',\n    onClick,\n    disabled,\n  } = props;\n  const renderRefreshTooltip = (tooltipProps: TooltipProps) => (\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    <Tooltip id=\"button-tooltip\" {...tooltipProps}>\n      {tooltipText}\n    </Tooltip>\n  );\n\n  return (\n    <OverlayTrigger placement={tooltipPlacement} overlay={renderRefreshTooltip}>\n      <Button className=\"ms-5\" onClick={onClick} disabled={disabled}>\n        <BsArrowRepeat style={iconStyle} className={classNames({ [styles.rotating]: disabled })} />\n      </Button>\n    </OverlayTrigger>\n  );\n};\n\nexport default RefreshButton;\n","import React from 'react';\n\nimport RefreshButton from '../../components/RefreshButton';\n\n\ninterface PropsInterface {\n  onClick: () => void;\n  isFetching: boolean;\n}\n\nconst NavbarComponent = ({ onClick, isFetching }: PropsInterface) => (\n  <div className=\"me-3\">\n    <RefreshButton\n      tooltipText=\"Refresh News\"\n      tooltipPlacement=\"left\"\n      onClick={onClick}\n      disabled={isFetching}\n    />\n  </div>\n);\n\nexport default NavbarComponent;\n","import React, { useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n  Button, Card, Container, Spinner,\n} from 'react-bootstrap';\n\nimport classNames from 'classnames';\nimport { useSelector } from 'react-redux';\nimport styles from './Home.module.scss';\nimport { useTitle, useAppDispatch } from '../../app/hooks';\nimport { useGetNewStoriesQuery } from '../../features/story';\nimport Layout from '../../components/Layout';\nimport DelimiterVertical from '../../components/DelimiterVertical';\nimport NavbarComponent from './NavbarComponent';\nimport { POLLING_INTERVAL, STORIES_QTY } from '../../app/config';\nimport { formatDate } from '../../app/lib';\nimport { selectNumberOfDisplayedStories, increaseNumberOfDisplayedStories } from '../../features/numberOfDisplayedStories';\n\n\nfunction Index() {\n  useTitle('Hottest stories');\n\n  const displayedQty = useSelector(selectNumberOfDisplayedStories);\n\n  const {\n    data: stories = [], refetch, isFetching, isLoading,\n  } = useGetNewStoriesQuery(undefined, {\n    pollingInterval: POLLING_INTERVAL,\n  });\n\n  const displayedStories = React.useMemo(\n    () => stories.slice(0, displayedQty),\n    [displayedQty, stories],\n  );\n\n  const dispatch = useAppDispatch();\n  const showMore = useCallback(\n    () => dispatch(increaseNumberOfDisplayedStories()),\n    [dispatch],\n  );\n\n  const NavbarComponentWrapper = () => (\n    <NavbarComponent onClick={refetch} isFetching={isFetching} />\n  );\n\n  return (\n    <Layout navbarComponent={NavbarComponentWrapper}>\n      <Container\n        className={classNames(styles.content, { [styles['content--loading']]: isLoading })}\n      >\n        { isLoading\n          ? <Spinner animation=\"border\" variant=\"primary\" />\n          : (\n            <>\n              {displayedStories.map((story) => (\n                <Link\n                  key={story.id}\n                  to={`/${story.id}`}\n                  className=\"text-start text-decoration-none d-block mb-2\"\n                >\n                  <Card bg=\"light\">\n                    <Card.Body>\n                      <Card.Title>{story.title}</Card.Title>\n                      <Card.Subtitle>\n                        {`${story.score} points`}\n                        <DelimiterVertical />\n                        {story.by}\n                        <DelimiterVertical />\n                        {formatDate(story.time)}\n                        {story.kids && (\n                          <>\n                            <DelimiterVertical />\n                            <span>Comments</span>\n                          </>\n                        )}\n                      </Card.Subtitle>\n                    </Card.Body>\n                  </Card>\n                </Link>\n              ))}\n              {displayedStories.length !== 0 && (displayedQty < STORIES_QTY) && (\n                <Button\n                  variant=\"outline-primary\"\n                  onClick={showMore}\n                  className=\"mt-3\"\n                >\n                  Show more\n                </Button>\n              )}\n            </>\n          )}\n      </Container>\n    </Layout>\n  );\n}\n\nexport default Index;\n","import { Button, Card } from 'react-bootstrap';\nimport sanitizeHtml from 'sanitize-html';\nimport React from 'react';\n\nimport classNames from 'classnames';\nimport { CommentInterface } from '../../features/comment';\nimport styles from './Story.module.scss';\nimport DelimiterVertical from '../../components/DelimiterVertical';\nimport { ID, IDs } from '../../app/types';\nimport type { StateInterface } from './index';\nimport { formatDate } from '../../app/lib';\n\n\nconst renderComments = (comments: CommentInterface[], expand: Boolean, kids: IDs = []) => {\n  if (!kids) return null;\n\n  return kids.map((id: ID) => {\n    const comment = comments.find((c) => c.id === id);\n\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    return comment && <Comment comment={comment} expand={expand} comments={comments} />;\n  });\n};\n\ninterface PropsInterface {\n  comment: CommentInterface;\n  comments: CommentInterface[];\n  // eslint-disable-next-line react/require-default-props\n  expand?: Boolean;\n  // eslint-disable-next-line react/require-default-props\n  onClick?: () => void;\n  // eslint-disable-next-line react/require-default-props\n  rootCommentsState?: StateInterface;\n}\n\nexport function Comment(props: PropsInterface) {\n  const {\n    comments, comment, onClick, rootCommentsState, expand: expandComment,\n  } = props;\n\n  const isRootCommentHasChildren = rootCommentsState\n    && comments.some((c) => c.parent === comment.id);\n\n  const expand = expandComment || (isRootCommentHasChildren && rootCommentsState?.[comment.id]);\n\n  return (\n    <Card\n      bg=\"light\"\n      className={classNames(\n        'mb-3',\n        { 'ms-4 mt-3': !rootCommentsState },\n      )}\n    >\n      <Card.Body>\n        <Card.Subtitle className={`text-muted ${styles.comment__header}`}>\n          {comment.by}\n          <DelimiterVertical />\n          {formatDate(comment.time)}\n          {isRootCommentHasChildren && (\n            <>\n              <DelimiterVertical />\n              <Button\n                variant=\"link\"\n                className=\"text-decoration-none\"\n                size=\"sm\"\n                onClick={onClick}\n              >\n                [\n                {expand ? 'hide answers' : 'show answers'}\n                ]\n              </Button>\n            </>\n          )}\n        </Card.Subtitle>\n        <Card.Text\n          className=\"mt-2\"\n          dangerouslySetInnerHTML={{ __html: sanitizeHtml(comment.text) }}\n        />\n        {expand && renderComments(comments, expand, comment?.kids)}\n      </Card.Body>\n    </Card>\n  );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Button } from 'react-bootstrap';\nimport { BsHouseDoor } from 'react-icons/bs';\n\nimport styles from './NavbarComponent.module.scss';\n\n\nconst NavbarComponent = () => (\n  <Link\n    to=\"/\"\n    className=\"fs-2 ms-3 justify-content-end\"\n  >\n    <Button className={styles.button} variant=\"light\">\n      <BsHouseDoor className={styles.icon} />\n      Back to the News List\n    </Button>\n  </Link>\n);\n\nexport default NavbarComponent;\n","import React, {\n  useCallback, useMemo, useState, ReactNode,\n} from 'react';\nimport { useParams } from 'react-router-dom';\nimport { isEmpty, memoize } from 'lodash';\nimport { Alert, Spinner } from 'react-bootstrap';\n\nimport sanitizeHtml from 'sanitize-html';\nimport { useAppDispatch, useAppSelector, useTitle } from '../../app/hooks';\nimport { StoryInterface, useGetNewStoriesQuery } from '../../features/story';\nimport {\n  CommentInterface,\n  fetchComments,\n  selectAllComments, selectIsCommentsLoading,\n  selectStoryCommentsQty,\n} from '../../features/comment';\nimport { ID, IDs } from '../../app/types';\nimport { Comment } from './Comment';\nimport RefreshButton from '../../components/RefreshButton';\nimport Layout from '../../components/Layout';\nimport NavbarComponent from './NavbarComponent';\nimport { POLLING_INTERVAL } from '../../app/config';\nimport styles from './Story.module.scss';\nimport API from '../../app/API';\nimport { formatDate } from '../../app/lib';\n\n\nconst ContentWrapper = ({ children }: { children: ReactNode }) => (\n  <Layout navbarComponent={NavbarComponent}>\n    <div className=\"container pt-2\">\n      {children}\n    </div>\n  </Layout>\n);\n\nexport interface StateInterface { [id: number]: Boolean }\n\nfunction Story() {\n  const { id: idFromParams } = useParams<{ id: string }>();\n  const id = Number(idFromParams);\n\n  useTitle(() => `title ${id}`, [id]);\n\n  const { story: cachedStory } = useGetNewStoriesQuery(\n    undefined,\n    {\n      selectFromResult: ({ data }) => ({ story: data?.find((item) => item.id === id) }),\n    },\n  );\n\n  const [story, setStory] = useState(cachedStory);\n  const [storyError, setStoryError] = useState(null);\n\n  const rootCommentIds: IDs = useMemo(() => story?.kids || [], [story]);\n  const expandRootCommentInitialState: StateInterface = rootCommentIds\n    .reduce((acc, commentId: ID) => ({ ...acc, [commentId]: false }), {});\n  const [rootCommentsState, setRootCommentsState] = useState(expandRootCommentInitialState);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const onExpandRootCommentClick = useCallback(memoize(\n    (commentId: ID) => () => setRootCommentsState(\n      (prevState) => ({ ...prevState, [commentId]: !prevState[commentId] }),\n    ),\n  ),\n  []);\n\n\n  const dispatch = useAppDispatch();\n  const refreshComments = useCallback(\n    () => dispatch(fetchComments(rootCommentIds)),\n    [dispatch, rootCommentIds],\n  );\n\n  React.useEffect(() => {\n    if (!story) {\n      API.fetchByIds([id])\n        .then(([s]) => setStory(s as StoryInterface))\n        .catch((error) => {\n          setStoryError(error.message);\n          console.error('Log somewhere error', error);\n        });\n\n      return undefined;\n    }\n\n    let timer: ReturnType<typeof setTimeout>;\n    const refresh = () => {\n      refreshComments();\n      timer = setTimeout(() => {\n        refresh();\n      }, POLLING_INTERVAL);\n    };\n    refresh();\n\n    return () => clearTimeout(timer);\n  }, [refreshComments, story, id]);\n\n\n  const comments = useAppSelector(selectAllComments);\n  const rootComments: CommentInterface[] = React.useMemo(\n    () => comments.filter((comment) => comment.parent === Number(id)), [id, comments],\n  );\n\n  const commentsQty: ID = useAppSelector(\n    (state) => selectStoryCommentsQty(state, rootCommentIds),\n  );\n  const isCommentsLoading: boolean = useAppSelector(selectIsCommentsLoading);\n\n  if (!story) {\n    return (\n      <ContentWrapper>\n        <div className={styles['story--loading']}>\n          { storyError\n            ? (\n              <Alert variant=\"danger\">\n                {`Something goes wrong: \\u00A0${storyError}`}\n                <br />\n                <br />\n                Try to refresh the page.\n              </Alert>\n            )\n            : <Spinner animation=\"border\" variant=\"primary\" />}\n        </div>\n      </ContentWrapper>\n    );\n  }\n\n  return (\n    <ContentWrapper>\n      <h1 className=\"mt-4 mb-4\">{story.title}</h1>\n      <dl className=\"row\">\n        <dt className=\"col-sm-1\">Author</dt>\n        <dd className=\"col-sm-11\">{story.by}</dd>\n\n        <dt className=\"col-sm-1\">Date</dt>\n        <dd className=\"col-sm-11\">{formatDate(story.time)}</dd>\n\n        {story.url && (\n          <>\n            <dt className=\"col-sm-1\">link</dt>\n            <dd className=\"col-sm-11\"><a href={story.url}>{story.url}</a></dd>\n          </>\n        )}\n\n        {/* eslint-disable react/no-danger */\n          story.text && (\n            <>\n              <dt className=\"col-sm-1\">Text</dt>\n              <dd\n                className=\"col-sm-11\"\n                dangerouslySetInnerHTML={{ __html: sanitizeHtml(story.text) }}\n              />\n            </>\n          )\n          /* eslint-enable react/no-danger */\n        }\n\n      </dl>\n      {isEmpty(rootComments) ? null : (\n        <>\n          <div className=\"d-flex align-items-center mt-5 mb-4\">\n            <h2>\n              Comments (\n              {commentsQty}\n              )\n            </h2>\n            <RefreshButton\n              onClick={refreshComments}\n              disabled={isCommentsLoading}\n              tooltipText=\"Refresh comments\"\n            />\n          </div>\n          {rootComments.map((comment: CommentInterface) => (\n            <Comment\n              key={comment.id}\n              comment={comment}\n              onClick={onExpandRootCommentClick(comment.id)}\n              rootCommentsState={rootCommentsState}\n              comments={comments}\n            />\n          ))}\n          {}\n        </>\n      )}\n    </ContentWrapper>\n  );\n}\n\nexport default Story;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from 'react-router-dom';\n\nimport { store } from './app/store';\nimport * as serviceWorker from './serviceWorker';\nimport './index.scss';\nimport Home from './pages/Home';\nimport NewsItem from './pages/Story';\nimport { PREFIX } from './app/config';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router basename={`/${PREFIX}`}>\n        <Switch>\n          <Route path=\"/\" component={Home} exact />\n          <Route path=\"/:id\" component={NewsItem} exact />\n          <Redirect to=\"/\" />\n        </Switch>\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"comments--loading\":\"Story_comments--loading__1vnw4\",\"story--loading\":\"Story_story--loading__v6jwJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Home_content__2Q55q\",\"content--loading\":\"Home_content--loading__1nnvB\"};"],"sourceRoot":""}